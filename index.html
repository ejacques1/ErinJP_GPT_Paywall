<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ErinGPT Paywall Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            height: 100vh;
            display: flex;
            background: #ffffff;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: #202123;
            color: white;
            display: flex;
            flex-direction: column;
            padding: 12px;
        }

        .sidebar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 8px 12px;
        }

        .sidebar-title {
            font-weight: 600;
            font-size: 14px;
        }

        .new-chat-btn {
            background: none;
            border: 1px solid #565869;
            color: white;
            border-radius: 6px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .new-chat-btn:hover {
            background: #40414f;
        }

        .gpts-section {
            border-bottom: 1px solid #565869;
            padding-bottom: 12px;
            margin-bottom: 12px;
        }

        .gpts-btn {
            background: none;
            border: none;
            color: white;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 14px;
            border-radius: 6px;
            width: 100%;
            text-align: left;
        }

        .gpts-btn:hover {
            background: #40414f;
        }

        .previous-chats {
            flex: 1;
        }

        .previous-chats h3 {
            font-size: 12px;
            color: #8e8ea0;
            margin-bottom: 8px;
            padding: 0 12px;
        }

        .chat-item {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            font-size: 14px;
            margin-bottom: 2px;
        }

        .chat-item:hover {
            background: #40414f;
        }

        .chat-item.active {
            background: #40414f;
        }

        .user-section {
            border-top: 1px solid #565869;
            padding-top: 12px;
            display: flex;
            align-items: center;
            padding: 12px;
        }

        .user-avatar {
            width: 28px;
            height: 28px;
            background: #7C3AED;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 8px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .header {
            padding: 12px 20px;
            border-bottom: 1px solid #e5e5e5;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-logo {
            width: 24px;
            height: 24px;
        }

        .header-title {
            font-size: 16px;
            font-weight: 600;
        }

        .header-subtitle {
            font-size: 14px;
            color: #6b7280;
        }

        /* Welcome Screen */
        .welcome-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .welcome-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 24px;
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1f2937;
        }

        .welcome-subtitle {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 32px;
        }

        .start-demo-btn {
            background: #7C3AED;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 500;
        }

        .start-demo-btn:hover {
            background: #6D28D9;
        }

        /* Chat Area */
        .chat-container {
            flex: 1;
            display: none;
            flex-direction: column;
            padding: 20px;
            overflow-y: auto;
        }

        .chat-container.active {
            display: flex;
        }

        .message {
            margin-bottom: 16px;
            max-width: 70%;
            padding: 16px;
            border-radius: 8px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .message.user {
            background: #f0f0f0;
            margin-left: auto;
            margin-right: 0;
        }

        .message.gpt {
            background: #ffffff;
            border: 1px solid #e5e5e5;
            margin-right: auto;
            margin-left: 0;
        }

        .typing-indicator {
            display: none;
            max-width: 70%;
            padding: 16px;
            border-radius: 8px;
            background: #ffffff;
            border: 1px solid #e5e5e5;
            margin-right: auto;
            margin-left: 0;
            margin-bottom: 16px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #9ca3af;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.4;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        /* Input Area */
        .input-container {
            padding: 20px;
            border-top: 1px solid #e5e5e5;
            display: none;
        }

        .input-container.active {
            display: block;
        }

        .input-wrapper {
            position: relative;
            max-width: 768px;
            margin: 0 auto;
        }

        .message-input {
            width: 100%;
            padding: 12px 50px 12px 16px;
            border: 1px solid #d1d5db;
            border-radius: 24px;
            font-size: 16px;
            outline: none;
            resize: none;
            font-family: inherit;
        }

        .message-input:focus {
            border-color: #7C3AED;
        }

        .send-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: #7C3AED;
            color: white;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .send-btn:hover {
            background: #6D28D9;
        }

        .send-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
        }

        .restart-demo-btn {
            background: #7C3AED;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            font-weight: 500;
            margin: 20px auto;
            display: none;
        }

        .restart-demo-btn:hover {
            background: #6D28D9;
        }

        .subscribe-link {
            color: #7C3AED;
            text-decoration: none;
        }

        .subscribe-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <span class="sidebar-title">ErinGPT Paywall</span>
            <span style="font-size: 20px; cursor: pointer;">+</span>
        </div>
        
        <button class="new-chat-btn">ðŸ’¬ New chat</button>
        
        <div class="gpts-section">
            <button class="gpts-btn">âœ¨ GPTs</button>
        </div>
        
        <div class="previous-chats">
            <h3>Previous Chats</h3>
            <div class="chat-item" id="health-coach">Health Coach AI</div>
            <div class="chat-item">Resume Builder</div>
            <div class="chat-item">Fundraising Assistant</div>
            <div class="chat-item">Language Tutor</div>
            <div class="chat-item">Business Idea Validator</div>
        </div>
        
        <div class="user-section">
            <div class="user-avatar">U</div>
            <span>User</span>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Header -->
        <div class="header">
            <svg class="header-logo" width="24" height="24" viewBox="0 0 32 32">
                <defs>
                    <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FFD700"/>
                        <stop offset="100%" style="stop-color:#FFA500"/>
                    </linearGradient>
                </defs>
                <path d="M16 4 L26 20 L6 20 Z" fill="url(#logoGradient)" stroke="#333" stroke-width="1"/>
                <path d="M16 12 L20 20 L12 20 Z" fill="#333"/>
            </svg>
            <div>
                <div class="header-title">My Custom GPT</div>
                <div class="header-subtitle">Powered by ErinGPT</div>
            </div>
        </div>

        <!-- Welcome Screen -->
        <div class="welcome-screen" id="welcome-screen">
            <svg class="welcome-logo" width="80" height="80" viewBox="0 0 32 32">
                <defs>
                    <linearGradient id="logoGradientLarge" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FFD700"/>
                        <stop offset="100%" style="stop-color:#FFA500"/>
                    </linearGradient>
                </defs>
                <path d="M16 4 L26 20 L6 20 Z" fill="url(#logoGradientLarge)" stroke="#333" stroke-width="1"/>
                <path d="M16 12 L20 20 L12 20 Z" fill="#333"/>
            </svg>
            <h1 class="welcome-title">My Custom GPT</h1>
            <p class="welcome-subtitle">Powered by ErinGPT</p>
            <button class="start-demo-btn" onclick="startDemo()">Start Demo</button>
        </div>

        <!-- Chat Container -->
        <div class="chat-container" id="chat-container">
            <div id="messages"></div>
            <div class="typing-indicator" id="typing-indicator">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>

        <!-- Input Container -->
        <div class="input-container" id="input-container">
            <div class="input-wrapper">
                <textarea 
                    class="message-input" 
                    id="message-input" 
                    placeholder="Message Custom GPT..." 
                    rows="1"
                    onkeydown="handleKeyPress(event)"
                ></textarea>
                <button class="send-btn" id="send-btn" onclick="sendMessage()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                    </svg>
                </button>
            </div>
            <button class="restart-demo-btn" id="restart-btn" onclick="restartDemo()">Restart Demo</button>
        </div>
    </div>

    <script>
        let demoStage = 0;
        let isWaitingForEmail = false;
        let isAuthenticated = false;

        function startDemo() {
            // Hide welcome screen
            document.getElementById('welcome-screen').style.display = 'none';
            
            // Show chat and input
            document.getElementById('chat-container').classList.add('active');
            document.getElementById('input-container').classList.add('active');
            
            // Highlight Health Coach AI in sidebar
            document.getElementById('health-coach').classList.add('active');
            
            // Auto-send initial message
            setTimeout(() => {
                addMessage('user', 'Hey, can you help me develop a diet plan to lose 5 lbs in 5 days?');
                
                setTimeout(() => {
                    showTypingIndicator();
                    setTimeout(() => {
                        hideTypingIndicator();
                        const paywallMessage = `Hi! This is a demo of how ErinGPT can protect your custom GPT on ChatGPT.

Before we dive in, I need to verify your access. Please share your email address so I can authenticate you.

If you haven't signed up yet, you can get access here: <a href="#" class="subscribe-link">Subscribe Now</a>`;
                        addMessage('gpt', paywallMessage);
                        isWaitingForEmail = true;
                        demoStage = 1;
                    }, 2000);
                }, 1000);
            }, 500);
        }

        function addMessage(sender, text, skipScroll = false) {
            const messagesContainer = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = text;
            messagesContainer.appendChild(messageDiv);
            
            if (!skipScroll) {
                scrollToBottom();
            }
        }

        function showTypingIndicator() {
            document.getElementById('typing-indicator').style.display = 'block';
            scrollToBottom();
        }

        function hideTypingIndicator() {
            document.getElementById('typing-indicator').style.display = 'none';
        }

        function scrollToBottom() {
            const chatContainer = document.getElementById('chat-container');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('message-input');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage('user', message);
            input.value = '';
            
            if (isWaitingForEmail) {
                handleEmailResponse(message);
            }
        }

        function handleEmailResponse(email) {
            showTypingIndicator();
            
            setTimeout(() => {
                hideTypingIndicator();
                
                // Check for successful authentication (only accept emails with 'paid' or 'subscribed' but NOT 'not-subscribed' or 'unpaid')
                if ((email.includes('paid') || email.includes('subscribed')) && 
                    !email.includes('not-subscribed') && !email.includes('unpaid')) {
                    // Success flow
                    addMessage('gpt', 'âœ… Thanks for verifying! You\'ve been authenticated.');
                    isAuthenticated = true;
                    isWaitingForEmail = false;
                    
                    setTimeout(() => {
                        showTypingIndicator();
                        setTimeout(() => {
                            hideTypingIndicator();
                            addMessage('gpt', 'Hi! As your Health Coach AI, I can help you with nutrition planning, workout routines, habit tracking, and wellness strategies. What would you like to start with today?');
                            
                            // End demo
                            setTimeout(() => {
                                endDemo();
                            }, 2000);
                        }, 1500);
                    }, 1000);
                } else {
                    // Rejection flow
                    addMessage('gpt', 'Sorry, that email isn\'t associated with an active subscription. Please subscribe to use this custom GPT, then provide your verified email.');
                }
            }, 1500);
        }

        function endDemo() {
            const input = document.getElementById('message-input');
            const sendBtn = document.getElementById('send-btn');
            
            input.disabled = true;
            input.placeholder = 'Demo completed! Click "Restart Demo" to restart.';
            sendBtn.disabled = true;
            
            document.getElementById('restart-btn').style.display = 'block';
        }

        function restartDemo() {
            location.reload();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        // Auto-resize textarea
        document.getElementById('message-input').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 120) + 'px';
        });
    </script>
</body>
</html>
